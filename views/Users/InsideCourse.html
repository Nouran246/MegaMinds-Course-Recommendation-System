<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Template Mo">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <title>Education Template - Meeting Detail Page</title>

    <!-- Bootstrap core CSS -->
    <link href="../../public/css/user css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="../../public/css/user css/fontawesome.css">
    <link rel="stylesheet" href="../../public/css/user css/templatemo-edu-meeting.css">
    <link rel="stylesheet" href="../../public/css/user css/owl.css">
    <link rel="stylesheet" href="../../public/css/user css/lightbox.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <style>
        .list-group-item.active {
            background-color: #721010; /* Change this color as needed */
            color: white; /* Change text color for contrast */
            border-color: #721010; 
        }

        .list-group-item.done {
            color: green; /* Change text color for completed lessons */
            text-decoration: line-through; /* Strikethrough for completed lessons */
        }

        p,
        h2 .mb-3 {
            color: white;
        }

        .mb-3 {
            color: white;
        }

        .embed-responsive {
            position: relative;
            display: block;
            width: 100%;
            max-width: 800px;
            height: 450px;
            padding: 0;
            overflow: hidden;
        }

        .embed-responsive iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        .discussion-container {
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    margin-top: 20px; /* Space above the discussion */
}

.discussion-container h1 {
    font-size: 1.5rem; /* Adjusted size for heading */
    color: white; /* Heading color */
}

#discussionForm {
    display: flex;
    flex-direction: column;
}

#userNameInput, #userCommentInput {
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid #ddd; /* Light border */
    border-radius: 4px;
}

button {
    padding: 10px;
    background-color: #721010; /* Button background color */
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s; /* Transition for hover effect */
}

button:hover {
    background-color: #a61717; /* Darker shade on hover */
}

#discussionCommentsSection {
    margin-top: 20px;
}

.discussion-comment {
    color: #f9f9f9; /* Light background for comments */
    border: 1px solid #ddd; /* Light border */
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 10px;
}

.discussion-comment .comment-username {
    font-weight: bold;
    margin-bottom: 5px;
}

.discussion-comment .comment-text {
    margin-top: 5px;
}
    </style>
</head>

<body>
    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">MegaMinds</a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <li><a href="Courses.html">My Courses</a></li>
                            <li class="has-sub">
                                <a href="javascript:void(0)">Meetings</a>
                                <ul class="sub-menu">
                                    <li><a href="Courses.html">Upcoming Meetings</a></li>
                                    <li><a href="meeting-details.html">Meeting Details</a></li>
                                </ul>
                            </li>
                            <li><a href="cart-page.html">Cart</a></li>
                            <li><a href="Courses.html">My Profile</a></li>
                            <li><a href="index.html">Sign Out</a></li>
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <section class="heading-page header-text" id="top">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h6>Improve your programming knowledge </h6>
                    <h2>Introduction to Computer Science </h2>
                </div>
            </div>
        </div>
    </section>

    <section class="meetings-page" id="meetings">

        <section class="course-content">
            <div class="container">
                <div class="row">
                    <!-- Sidebar for course outline -->
                    <nav class="col-md-3">
                        <h5>Course Outline</h5>
                        <ul class="list-group">
                            <li class="list-group-item active" data-index="0">Lesson 1: Basics</li>
                            <li class="list-group-item" data-index="1">Lesson 2: Advanced Topics</li>
                            <li class="list-group-item" data-index="2">Lesson 3: Data Structures</li>
                        </ul>
                    </nav>

                    <!-- Main content area for the video and details -->
                    <main class="col-md-9">
                        <div id="lesson-container" class="lesson-section mb-3">
                            <h2 id="lesson-title">Lesson 1: Basics</h2>
                            <p id="lesson-description">Brief description of the Basics lecture content.</p>
                            <div class="embed-responsive mb-4">
                                <iframe id="lesson-video" class="embed-responsive-item" src="https://www.youtube.com/embed/8j9b_9Zy8C8" allowfullscreen></iframe>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                            <button class="btn btn-secondary" id="prevButton">Previous</button>
                            <button class="btn btn-primary" id="nextButton">Next</button>
                        </div>
                    </main>
                </div>
            </div>
            <div class="discussion-container">
                <h1>Course Discussion</h1>
                <form id="discussionForm">
                    <input type="text" id="userNameInput" placeholder="Your Name" required>
                    <textarea id="userCommentInput" placeholder="Write your comment here..." required></textarea>
                    <button type="submit">Post Comment</button>
                </form>
        
                <div id="discussionCommentsSection">
                    <h2>Comments</h2>
                    <div id="discussionCommentsList">
                        <!-- Comments will appear here -->
                    </div>
                </div>
            </div>
        </section>

        <div class="footer">
            <p>Copyright © 2024 MEGAMINDS. All Rights Reserved. 
              </p>
          </div>
        </section>
    </section>

    <!-- Scripts -->
    <!-- Bootstrap core JavaScript -->
    <script src="../../public/js/user js/jquery.min.js"></script>
    <script src="../../public/js/user js/bootstrap.bundle.min.js"></script>

    <script src="../../public/js/user js/isotope.min.js"></script>
    <script src="../../public/js/user js/owl-carousel.js"></script>
    <script src="../../public/js/user js/lightbox.js"></script>
    <script src="../../public/js/user js/js/tabs.js"></script>
    <script src="../../public/js/user js/js/video.js"></script>
    <script src="../../public/js/user js/js/slick-slider.js"></script>
    <script src="../../public/js/user js/js/custom.js"></script>
    <script>
        // Load the IFrame Player API code asynchronously
        var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('lesson-video', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        // Start tracking video progress
        setInterval(checkVideoProgress, 1000); // Check every second
    }

    function onPlayerStateChange(event) {
        // You can handle video state changes here if needed
    }

    // Navigation functionality for Previous and Next buttons
    $(window).scroll(function () {
        checkSection();
    });

    var checkSection = function checkSection() {
        $('.lesson-section').each(function () {
            var $this = $(this),
                topEdge = $this.offset().top - 80,
                bottomEdge = topEdge + $this.height(),
                wScroll = $(window).scrollTop();

            if (topEdge < wScroll && bottomEdge > wScroll) {
                var currentId = $this.attr('id'),
                    reqLink = $('li.list-group-item').filter(function () {
                        return $(this).data('target') === currentId;
                    });
                $('li.list-group-item.active').removeClass('active');
                reqLink.addClass('active');
            }
        });
    };


    var lectures = [
        {
            title: "Lesson 1: Basics",
            description: "Brief description of the Basics lecture content.",
            videoId: "M7lc1UVf-VE" // Short video ID 1 (accessible)
        },
        {
            title: "Lesson 2: Advanced Topics",
            description: "Overview of advanced topics in Computer Science.",
            videoId: "9bZkp7q19f0" // Short video ID 2 (accessible)
        },
        {
            title: "Lesson 3: Data Structures",
            description: "Introduction to various data structures.",
            videoId: "BBvod49uySQ" // Short video ID 3 (accessible)
        }
    ];

    var currentLectureIndex = 0;

    var loadLecture = function (index) {
        $('#lesson-title').text(lectures[index].title);
        $('#lesson-description').text(lectures[index].description);
        $('#lesson-video').attr('src', "https://www.youtube.com/embed/" + lectures[index].videoId);
        $('li.list-group-item').removeClass('active');
        $('li.list-group-item').eq(index).addClass('active');

        currentLectureIndex = index; // Update the current index
    };

    document.getElementById('nextButton').onclick = function () {
        if (currentLectureIndex < lectures.length - 1) {
            loadLecture(currentLectureIndex + 1);
        }
    };

    document.getElementById('prevButton').onclick = function () {
        if (currentLectureIndex > 0) {
            loadLecture(currentLectureIndex - 1);
        }
    };

    // Check video progress and mark as done
    var videoDuration = 0;

    function checkVideoProgress() {
    if (player && player.getCurrentTime && player.getDuration) {
        var currentTime = player.getCurrentTime();
        videoDuration = player.getDuration();

        // Log current time and duration for debugging
        console.log(`Current Time: ${currentTime}, Duration: ${videoDuration}`);

        // Check if 80% of the video has been watched
        if (currentTime >= 0.8 * videoDuration) {
            markAsDone(currentLectureIndex);
        }
    }
}
function onPlayerReady(event) {
    // Start tracking video progress
    setInterval(checkVideoProgress, 1000); // Check every second
}

function markAsDone(index) {
    var lessonItem = $('li.list-group-item').eq(index);
    if (!lessonItem.hasClass('done')) {
        lessonItem.addClass('done');
        lessonItem.append(' ✔'); // Append a check mark
        console.log(`Lesson ${index + 1} marked as done.`);
    }
}


    // Initial load
    loadLecture(currentLectureIndex);

    document.getElementById("discussionForm").addEventListener("submit", function (e) {
    e.preventDefault();

    // Get user inputs
    const userName = document.getElementById("userNameInput").value.trim();
    const userComment = document.getElementById("userCommentInput").value.trim();

    if (userName && userComment) {
        addDiscussionComment(userName, userComment);
        
        // Clear the input fields after posting
        document.getElementById("userNameInput").value = '';
        document.getElementById("userCommentInput").value = '';
    }
});

function addDiscussionComment(userName, userComment) {
    // Create elements
    const commentDiv = document.createElement("div");
    commentDiv.classList.add("discussion-comment");

    const userElement = document.createElement("div");
    userElement.classList.add("comment-username");
    userElement.textContent = userName;

    const textElement = document.createElement("div");
    textElement.classList.add("comment-text");
    textElement.textContent = userComment;

    // Append elements
    commentDiv.appendChild(userElement);
    commentDiv.appendChild(textElement);
    document.getElementById("discussionCommentsList").appendChild(commentDiv);
}

</script>
</body>

</html>
